# Тестовое задание 1
## Веб-сервис получения вопросов для викторины

 ## Cборка образа
 Для сборки докер-образа запустите из корневой директориии проекта команду:
 ```
docker build -t task_trivia .
 ```
 При этом для конфигурации образа будет использован Dockerfile из корневой директории проекта.

 ## Настройка проекта
 Во время разработки для настройки проекта может быть использован файл config.ini из корневой директории проекта.
 Когда проект контейнеризован, пересобирать его каждый раз для изменения конфигурации неудобно. Поэтому настройки так же можно передать в проект с помощью переменных окружения:
 ```
- USE_ENV=1
- DATABASE_URI=postgresql+psycopg2://postgres:postgrespw@postgres:5432
- SITE_PORT=5000
 ```
 Например, вот так это реализовано в файле docker-compose.yml.
 Переменная USE_ENV отвечает, будут использоваться переменные окружения или значения по умолчанию из config.ini.

## Запуск проекта
### Непосредственно на своей машине (например, во время разработки):
Подготовка окружения (выполнется один раз):
```
python3 -m venv venv
source venv/bin/activate
pip install -r requirments.txt
```
Запуск:
```
python main.py
```
Все команды приведены для linux, выполняются из корневой директории проекта.
### В контейнере
```
docker run task_wav 
```
При необходимости можно передать переменные среды, например:
```
docker run task_trivia SITE_PORT=80
```


### Docker-compose
В корневой директории проекта содержится файл docker-compose.yml, где заданы параметра проекта и контейнера с postgresql. Непосредственно сам образ проекта там подтягивается с докерхаба. Запустить оба контейнера можно с помощью команды
```
docker-compose up
```

## Подключение к базе данных
В качестве субд используется postgresql, контейнер с ней описан в docker-compose.yml.
Для подключения можно использовать URI.
```
DATABASE_URI=postgresql+psycopg2://postgres:postgrespw@postgres:5432
```

 ## Примеры использования
 ![Screenshot from 2023-06-10 17-31-21](https://github.com/Bobako/task_trivia/assets/52820434/22f72ebc-e412-431e-8f67-0e1bbfb9d59c)

